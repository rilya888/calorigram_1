# Как протестировать новый flow регистрации

## Что изменилось

**Было:**
- Выбор способа → Регистрация → Сразу Onboarding

**Стало:**
- Выбор способа → Регистрация → WelcomeScreen (приветствие) → Onboarding

Это соответствует логике Telegram бота.

## Быстрый тест

### 1. Новая регистрация
```
1. Удалите приложение (или сбросьте флаги в настройках)
2. Соберите проект в Xcode (⌘B)
3. Запустите (⌘R)
4. Выберите Email → Регистрация
5. Введите email, пароль, имя → нажмите "Зарегистрироваться"
6. Должен появиться WelcomeScreen с приветствием
7. Нажмите "Начать"
8. Должен появиться OnboardingView
9. Заполните все поля
10. Должен появиться MainTabView
```

### 2. Повторный вход
```
1. Нажмите Logout в профиле
2. Выберите Email → Вход
3. Введите данные
4. Должен СРАЗУ появиться MainTabView (без Welcome/Onboarding)
```

### 3. Перезапуск приложения
```
1. Закройте приложение (⌘Q в симуляторе)
2. Запустите снова
3. Должен СРАЗУ появиться MainTabView (токен сохранен, профиль заполнен)
```

## Если проблемы

### Проблема: Сразу показывается Onboarding
**Причина:** Флаг `hasSeenWelcome` не сброшен после предыдущего теста

**Решение:**
1. Удалите приложение
2. Или выполните в Xcode: Product → Clean Build Folder (⇧⌘K)
3. Пересоберите проект

### Проблема: При повторном входе показывается Welcome/Onboarding
**Причина:** Флаги не сбрасываются при обнаружении заполненного профиля

**Решение:** Проверьте, что функция `resetOnboardingFlagsIfNeeded()` вызывается

### Проблема: "User not found" при обновлении профиля
**Причина:** Пользователь не сохраняется в базе при регистрации

**Решение:** Проверьте логи на Railway — должны быть строки:
```
✅ Created user with ID: 7, email: ..., name: ...
✅ Committed user to database. User ID: 7
✅ Verified: User 7 exists in database
```

Если этих логов нет — проблема с сохранением в базу.

