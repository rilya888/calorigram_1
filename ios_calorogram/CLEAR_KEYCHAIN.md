# –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å Keychain –∏ AppStorage

## –ü—Ä–æ–±–ª–µ–º–∞
–í Keychain –æ—Å—Ç–∞–ª—Å—è —Ç–æ–∫–µ–Ω –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ç–µ—Å—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º.

## –†–µ—à–µ–Ω–∏–µ 1: –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ)

### –í —Å–∏–º—É–ª—è—Ç–æ—Ä–µ:
1. –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∏–∫–æ–Ω–∫—É Calorigram
2. –ù–∞–∂–∞—Ç—å "-" (—É–¥–∞–ª–∏—Ç—å)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ Xcode —Å–Ω–æ–≤–∞ (‚åòR)

**–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç:**
- Keychain (—Ç–æ–∫–µ–Ω—ã)
- AppStorage (—Ñ–ª–∞–≥–∏ hasSeenWelcome, hasCompletedOnboarding)
- UserDefaults

## –†–µ—à–µ–Ω–∏–µ 2: Reset —Å–∏–º—É–ª—è—Ç–æ—Ä

### –í Xcode:
1. Device ‚Üí Erase All Content and Settings
2. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞ (‚åòR)

## –†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ `ProfileView` –≤—Ä–µ–º–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```swift
Button("üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (debug)") {
    // –û—á–∏—Å—Ç–∏—Ç—å Keychain
    authViewModel.logout()
    
    // –û—á–∏—Å—Ç–∏—Ç—å AppStorage
    UserDefaults.standard.removeObject(forKey: "hasCompletedOnboarding")
    UserDefaults.standard.removeObject(forKey: "hasSeenWelcome")
    
    // –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ UserDefaults
    UserDefaults.standard.dictionaryRepresentation().keys.forEach { key in
        UserDefaults.standard.removeObject(forKey: key)
    }
}
.foregroundColor(.red)
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

### –û–∂–∏–¥–∞–µ—Ç—Å—è:
1. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è AuthView (—ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
2. ‚úÖ –ù–ï–¢ WelcomeScreen —Å—Ä–∞–∑—É
3. ‚úÖ –ù–ï–¢ OnboardingView —Å—Ä–∞–∑—É

### –õ–æ–≥–∏ –≤ Xcode Console:
```
üîç checkAuthStatus() called
üîç hasToken: false
‚úÖ No token found, user is not authenticated
üì± ContentView: User is authenticated: false
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `hasToken: true` - –∑–Ω–∞—á–∏—Ç —Ç–æ–∫–µ–Ω –Ω–µ –±—ã–ª –æ—á–∏—â–µ–Ω, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –†–µ—à–µ–Ω–∏–µ 2.

## –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ flow:

```
AuthView (–≤—ã–±–æ—Ä Email)
  ‚Üì
EmailAuthView (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: email, password, name)
  ‚Üì
WelcomeScreen (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ)
  ‚Üì
OnboardingView (–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è)
  ‚Üì
MainTabView
```

–í–∞–∂–Ω–æ: **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É–¥–∞–ª–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º!

